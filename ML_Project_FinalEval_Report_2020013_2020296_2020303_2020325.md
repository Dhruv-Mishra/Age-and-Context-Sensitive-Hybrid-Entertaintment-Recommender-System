Age and Context Sensitive Entertainment

Recommendation System for Families

Abhinn Yadav            Dhruv Mishra            Hunar Kaur            Sadhvi Bhan 2020013                     2020296                     2020303                  2020325

**Abstract**

With the hectic lifestyle, the time a family spends together has decreased relying upon their ratings, recommends movies to others with similar

in today's world. Rather than spending quantity family time, quality family tastes, allowing users to explore more.

time has become essential. Hence, many people have started with family

movie night rituals in their houses. However, families have to spend much **Dataset**

time finding movies that all family members prefer and that are

age-appropriate. Our project aims to create a movie recommendation **[https://drive.google.com/drive/folders/1W6GibRSrN6HujoaYbA2zk_BFO4vL0-Ef?usp=sharing**](https://drive.google.com/drive/folders/1W6GibRSrN6HujoaYbA2zk_BFO4vL0-Ef?usp=sharing)**

system that considers the family members' preferences, past activities, **Dataset Description For Content and Demographic Filtering:**

and age and recommends an age-appropriate movie for the family. Our dataset contains the following attributes: [~~https://github.com/Dhruv-Mishra/Age-and-Context-Sensitive-Hybrid-Entertaintm~~](https://github.com/Dhruv-Mishra/Age-and-Context-Sensitive-Hybrid-Entertaintment-Recommender-System) ● type: If it is a movie or a TV show.

[~~ent-Recommender-System~~](https://github.com/Dhruv-Mishra/Age-and-Context-Sensitive-Hybrid-Entertaintment-Recommender-System) ● title: The current title of the movie.

- director: The director(s) of the movie/TV show.

**Introduction** ● cast: The actor(s)/actress(es) of the movie/TV show.

As fun and easy as it is to binge your favorite shows with your loved ones, ● country: The country in which the movie was released.

choosing what to watch is challenging. With so many genres to choose ● date added: The date on which the movie/TV show was released. from, different preferences among individuals, and choosing ● age\_rating: The age rating given to the movie/TV show. age-appropriate content, narrowing down on the top movies and shows ● duration: Total duration of the movie/TV show

can be complicated. ● listed\_in: Genre(s) of the movie/TV show.

Our Ml model is a movie recommendation system for a group of ● description: Sentence(s) describing the movie/TV show. individuals which recommends the top movies based on the above ● IMDB: The IMDB rating of the movies/TV show

criteria. Our dataset contains information about the users and the ratings ● TMBD: The tmdb rating of the movies/TV show

given by them to make suggestions.

**Dataset Description For Collaborative  Filtering:**

**Literature Survey** Our dataset contains the following attributes:

- title: The current title of the movie.

Broadly, recommendation-based systems involve three different major

- user id: Uniquely identifies the user

types of Filtering. Content-based filtering metadata about the show

- movie id: Uniquely identifies the movie.

presents a list of similar movies. Collaborative Filtering, on the other

- rating: The rating given by the user to a specific movie.

hand, uses the ratings given by the user to find other individuals who

**Exploratory Data Analysis:**

share similar interests. It recommends movies based on this match. ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.001.jpeg)Hybrid Filtering combines the power of the two. 

1. User Based vs. Item-Based Filtering [1] 

In user-based Filtering, users' interests were compared to find similar ones. Pearson Correlation Coefficient was used to determine the similarity between ratings. The higher the coefficient, the more correlated were the two users. An algorithm that found N nearest neighbors and made clusters of neighbors was used for user-based Filtering. Since Genres of movies and TV shows. The highest genre comes out to be international movies, the

ratings change from time to time, this method is not static. In Item Based second highest genre is Drama.![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.002.png)![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.003.png)

Filtering, LogLikelihood similarity was used. User ratings, once given, do

not change. Hence values of similarity would remain constant.

2. Movie recommendation system using collaborative learning [2]

This paper uses a collaborative approach to prescribing movies to others

with similar tastes, allowing users to explore more. A web application is

implemented that will enable users to rate movies and recommend

Frequency of the imdb and tmdb ratings of the movies and TV shows appropriate movies based on others' ratings. This paper concluded that

the content-based recommendation systems work on individual users’

ratings, limiting users from exploring more. However, the collaborative

learning approach computes the connection between different users and,

(a)Scatter plot depicting for each movie its average rating(x) vs the number of ratings given by ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.004.png)the user (b) Scatter plot after rounding the ratings  as in (a)

**Preprocessing on Dataset:**

**Creation of Dataset:**

We considered multiple datasets consisting of essential features like Number of movies released in a year with max in 2016 and 2017 movie genres, age rating, and IMDB rating of the movie/ Tv Show apart

from other metadata. We observed that after removing null values from ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.005.jpeg)![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.006.png)these datasets, we needed more data to train our model. Hence we combined two similar datasets based on common columns using outer join to obtain a merged dataset.

On this newly merged dataset, it was observed for the same movies/show. Multiple rows could exist. A new row was created if a particular show/movie existed in both datasets with any column value missing or

differing. To correct this, we found the number of occurrences of the same Countries that made  the most movies/TV shows. The USA is the highest among all the

countries(left graph). The count of movies and TV shows in the dataset. There are more movies title and their row indices in the merged dataset. We would keep only the than TV shows in our dataset(right graph). first row out of these and drop the rest. If the row lacked some column

value, we iterated through the other rows and filled the row to be kept with![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.007.png)![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.008.jpeg) those values. We later dropped all the duplicate rows.

This gave us a dataset with unique values (for the title column) without any empty cells.

**Dataset Modification:**

A Show/Movie can have multiple genres. In our dataset, we had 40+

The Top 5 movies/Tv shows with the highest IMDb rating(left) and tmdb rating(right) different genres in total. We need to convert string data into numerical form to use it. We applied one-hot encoding on the genres. New columns ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.009.jpeg)were created for each genre where column value = 1 indicated the movie

was to be listed in that genre, and column value = 0 indicated the movie did not belong.

We also vectorized the description based on which we have predicted movies/TV shows. This is all done so the data is in a numerical format so

Count of the age certification ratings of the movies/TV shows of the dataset. TV shows with a

rating of TV-MA(Mature Audience) have the highest count. we can find correlations, as discussed later.

2

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.010.jpeg)

A bell shaped plot depicting the ratings and round-off rating  given by the users.

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.011.png) ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.012.png)

(a) (b)

**Methodology**

1. **Variance vs. PCA Dimensionality**

Our initial vector, after conversion of description into a TFIDF matrix, came out to be of size ~ 8809 X 18000.  We can not reduce the dimensionality of the 8k rows as they represent the movies in our dataset. We applied PCA on the 18k cols to reduce the dimensionality of the column vector. We tried various values of n ranging till ~3500 and compared the results.

We plotted the variance for different values of n(after PCA).  Application of PCA on the data changes that data, but the domain remains unchanged. Variance indicates the amount of information retained after PCA. As expected, the value of variance increases as the value of n increases. From the plot, we have chosen n = 3400 as it preserves 80 % of the information.

3

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.013.jpeg)

Results for n = 3400. Recommendations are close![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.014.png)

2. **K-means clustering**

We  analyzed the results of k-means clustering on our dataset. We Value of variance increases as components increase performed for k-means clustering for values of n. We plotted the elbow

curve and determined the optimal number of clusters. Plotting the ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.015.jpeg)clusters for n = 2 we observed that data is linearly separable in 2D. However when we plotted the clusters for n = 3400, the data was not separable in 2D. However, the data could be separable in higher

dimensions.  The corresponding elbow curves and cluster plots are given below.

N components vs Variance Plot ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.016.png)

**Results comparison after dimensionality reduction** 

For n = 2 value of k as observed from plot= 9![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.017.png)![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.018.png)

Results for n = 2. Recommendations are not close

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.019.jpeg) The corresponding k cluster plot which is separable.

The idea behind content filtering is that, given a movie, the program must ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.020.png)find and recommend a similar movie to the user. To compare similarities between the plots of the movies, we planned to use the movie description column of our dataset.

For the algorithmic computations, we first converted our string description into a vector. We did this by calculating the Term Frequency-Inverse Document Frequency (TF-IDF) vectors of the description. By doing this for all the movies, we got the TFID matrix(Matrix of TFID vectors) for the entire dataset.

However, before calculating the TDIF matrix, we enforced a strict age rating filter on the dataset and filtered out all inappropriate entries. We did this to ensure that the content is family-friendly and no viewer is exposed to potentially inappropriate content.

N = 3400, k = 9 For quantifying similarity, we compared different similarity

metrics(Cosine, Pearson, and Euclidean) and found relatively indifferent rankings![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.021.png) across the three. We finally settled for Cosine Similarity as it is independent of magnitude and is much faster to calculate than the other two metrics without significantly affecting our final results.

The formal, mathematical definition of cosine similarity is as follows:

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.022.png)

After this, we sorted the list containing the pairwise cosine similarity of all the movies with the movie we chose. In the case of multiple movies of

Data is not separable if observed in two dimensions using K-Means Clustering. choice(when multiple users are present), we took the total sum of

3. **Age filters** pairwise cosine similarity of each movie in the dataset with each movie of As depicted by EDA Graph above, we can see the vast number of genres choice as our final similarity metric. We then recommended the movies in present among the movies and TV-Shows. We have different categories decreasing order of value of this metric.

like TV-MA: strictly for adults, TV-14: for 14 and above, and TV-PG: for 14

and above but with parental guidance. Following this, we updated our **6. Collaborative-Based Filtering**

dataset to remove ratings unsuitable for the given age group. We decide In the collaborative filtering approach, we recommend the movies to a

on suitable ratings by the min and max age present in the group. Min-age user based on other users having similar interests. We look for users with is calculated to remove adult movies, while max-age is calculated so PG similar tastes and preferences to the current user. Then we recommend movies(parental guidance) can be allowed when an adult accompanies the

the movies favored by the matched users to the current user. We don't children.

require movie metadata to recommend movies for this technique. Instead, it requires the ratings the user gave to the movies. The dataset

4. **Demographic Filtering**

we used had the movie id, user id, and the ratings assigned by the user id Demographic refers to the statistical characteristics of the human

to the specific movie id.

population. When a new user joins the system, the model is unaware of his

We had one dataset containing movie id, movie name, and movie genres, past choices. This situation is termed a ‘Cold Start’. In such situations, we

and a second dataset containing user id, movie id, and the rating given by can predict the top-rated movies of all time to the user. In our dataset, we

the user id to the corresponding movie id. We joined both of these

had access to both the IMDB and TMDB ratings of a movie. The Pearson

datasets using movie id as the primary key. We then count the ratings per correlation between them was found to be 0.57. This is a moderate-high

movie and append the rating count column corresponding to each movie positive correlation, i.e., if one increases, the other is also expected to

id in the new dataset created. Further, we make a pivot table with index increase. We defined a new metric to score the movies, which is as

value as the user id, column value as the movie title and the feature whose follows: =α(IMDB rating) +β( TMDB rating)/( statistical summary is to be seen is ratings. Now we input a movie name to

α+β)

which the current user wants similar recommendations. We calculate the Where α and β are hyperparameters that can be tuned as more data on Pearson correlation of the input movie title column vector with all other

user preference is calculated column vectors having ratings of more than 20.

IMDb ratings are more popular hence Imdb ratings were given a higher

priority in the new\_score calculation.

5. **Content-Based Filtering**

5

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.023.png)

Now we get the pairwise Pearson Correlation value of every movie with the input movie. Now, we recommend five movies whose pairwise Pearson Correlation is the highest. In the case of multiple user inputs, we can recommend movies based on whose sum of the pairwise Pearson Correlation values associated with each input movie is the highest.

**7. Hybrid Filtering**

The hybrid filtering technique aims to recommend movies using the combination of the content-based filtering technique and collaborative filtering method. The Hybrid filtering approach can be performed in many ways. The contest-based filtering and collaborative-based filtering can be used separately, and then their predictions can be combined. Or we can add the functionalities from the contest-based methods to a collaborative-based approach. We seek to implement the latter approach to make our current model more effective and accurate. Due to discrepancies and missing data entries in the datasets used for content-based and collaborative filtering, we could not implement hybrid filtering.

**Content Based**: As can be seen, in content-based filtering, when users entered their movie preferences, similar recommendations based on description were made. All adult-rated movies were filtered out when the group consisted of users below 18. For a group of all 18+ users, the output consisted of adult-rated movies as well.

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.024.png)

**Content-Based Filtering for groups of teenagers**

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.025.png)



**Model Performance Analysis through CTR**

Our model is based on unsupervised learning. We can not define loss w.r.t **Content-Based Filtering for an average urban household**

the current dataset. Loss is based on user feedback, that is, whether the **Collaborative Filtering**:  Two users with similar choices are found, and a user liked a recommendation or not. So our model cannot reduce the loss movie recommendation is based on this.

unless we get real time feedback. In real life performance is measured ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.026.jpeg)through click-through rate(CTR). CTR is the number of clicks a movie recommendation receives divided by the number of times that recommendation is shown. For example, if a movie recommendation were clicked five times after being shown 100 times as a recommendation, its CTR would be 5%. If our model is deployed on real-world data, we can analyze the feedback from users and improve the CTR of our recommendations. 

**Results and Analysis** 

**Demographic Filtering:** As expected, the top movies and shows based on our new metric are shown. ![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.027.png)

**The output of demographic filtering: Top 10 movies recommended based on IMDb and tmdb rating**

**Combined Output:** computationally friendly formats while preserving the integrity of the After combining results for demographic, content and  collaborative data.  We also learned about different similarity metrics like Pearson filtering along with application of age based-filters, this is how the output correlation and cosine similarity. We learned how to apply PCA and chose is shown to users. Note that we first recommend content based results( the number of components to reduce dimensionality. We applied K-means here’s what we think you’ll like) followed by collaborative filtering results( to analyze if our data could be clustered.

others also watched) and lastly demographic filtering results( Don’t like

any of these? Start here) **Each member's contribution:**

We all have worked equally on this project.

**Input:**

**References:![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.028.png)**

[1]Ching-Seh Mike Wu, Deepti Garg, and Unnathi Bhandary.*Movie Recommendation System Using Collaborative Filtering*

[2] F. Furtado, A, Singh,*Movie Recommendation System Using Machine*

**Output:** *Learning 2022*

![](Aspose.Words.c53106e6-1fb4-4ce4-8859-5139065b0948.029.jpeg)

**Conclusion**

**Our learning from the project:**

Through this project, we learned about the three main filtering techniques for movie recommendation systems: content-based, collaborative, and demographic filtering. Content-based filtering provides recommendations similar to the user's preferences in the past. Demographic filtering utilizes information from the population to make recommendations where user preferences are unknown. Collaborative-based filtering provides recommendations by finding similar users. We learned about encoding string data into more
6
